<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>易广金出入凭证生成器</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/time.js"></script>
</head>

<body>
    <section class="aui-flexView">
        <header class="aui-navBar aui-navBar-fixed">
            <div class="aui-center">
                <span class="aui-center-title">易广金出入凭证生成器</span>
            </div>
        </header>
        <section class="aui-scrollView">
            <div class="aui-code-box">
                <form action="">
                    <p class="aui-code-line">
                        <input type="text" class="aui-code-line-input" name="search" value="" id="studentName"
                            autocomplete="off" placeholder="请输入姓名" />
                    </p>
                    <p class="aui-code-line">
                        <input type="text" class="aui-code-line-input" name="search" value="" id="studentId"
                            autocomplete="off" placeholder="请输入学号" />
                    </p>
                    <div class="aui-che-item">
                        <div class="aui-cell-che">
                            <input type="checkbox" class="aui-well-check" name="checkbox1" id="checkbox1"
                                checked="checked">
                            <i class="aui-well-icon-checked"></i>
                        </div>我已经阅读并同意 <a href="disclaimer.html">《免责声明》</a>
                    </div>
                    <div class="aui-code-btn">
                        <button type="button" onClick="boys()">男生</button>
                    </div>
                    <div class="aui-code-btn">
                        <button type="button" onClick="girls()">女生</button>
                    </div>
                </form>
                <a href="/gduf/beta-index.html">测试版</a>
            </div>
        </section>
    </section>
    <script type="text/javascript" charset="utf-8">
        $(function () {
            $(".aui-code-line-input").addClear();
            document.getElementById('studentName').value = getParam()['studentName'];
            document.getElementById('studentId').value = getParam()['studentId'];
        });

        function getParam() {
            var url = location.search; //获取url中"?"符后的字串
            var info = { 'studentName': '', 'studentId': '' }
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    if (strs[i].indexOf("studentName=") != -1) {
                        info['studentName'] = decodeURIComponent(strs[i].replace("studentName=", ""));
                    };
                    if (strs[i].indexOf("studentId=") != -1) {
                        info['studentId'] = decodeURIComponent(strs[i].replace("studentId=", ""));
                    };
                };
                return info;
            };
            return info;
        };

        function boys() {
            var name = document.getElementById('studentName').value.replace(/(^\s*)|(\s*$)/g, '');
            var id = document.getElementById('studentId').value.replace(/(^\s*)|(\s*$)/g, '');
            var checkstatus = document.getElementById('checkbox1').checked;
            if (checkstatus == true) {
                if (name.length != 0) {
                    if (id.length != 0) {
                        window.location.href = "student-default.html?studentName=" + name + "&studentId=" + id + "&studentSex=男";
                    } else {
                        alert("请正确填写姓名与学号！");
                    }
                } else {
                    alert("请正确填写姓名与学号！");
                }
            } else {
                alert("请先阅读并同意免责说明书！");
            }
        };

        function girls() {
            var name = document.getElementById('studentName').value.replace(/(^\s*)|(\s*$)/g, '');
            var id = document.getElementById('studentId').value.replace(/(^\s*)|(\s*$)/g, '');
            var checkstatus = document.getElementById('checkbox1').checked;
            if (checkstatus == true) {
                if (name.length != 0) {
                    if (id.length != 0) {
                        window.location.href = "student-default.html?studentName=" + name + "&studentId=" + id + "&studentSex=女";
                    } else {
                        alert("请正确填写姓名与学号！");
                    }
                } else {
                    alert("请正确填写姓名与学号！");
                }
            } else {
                alert("请先阅读并同意免责说明书！");
            }
        };
    </script>
</body>

</html>
